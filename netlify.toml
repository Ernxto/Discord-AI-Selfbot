[build]
  publish = "."
  functions = "netlify/functions"

[build.environment]
  PYTHON_VERSION = "3.9"

# Redirect root URL to function
[[redirects]]
  from = "/"
  to = "/.netlify/functions/poll"
  status = 200

# Redirect cron path
[[redirects]]
  from = "/poll"
  to = "/.netlify/functions/poll"
  status = 200

# Redirect any cron-triggered paths
[[redirects]]
  from = "/cron/*"
  to = "/.netlify/functions/poll"
  status = 200

[context.production.environment]
  DISCORD_TOKEN = "@discord-token"
  OPENROUTER_API_KEY = "@openrouter-key"
